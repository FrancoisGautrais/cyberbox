<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link href="css/demo.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/materialize.css">
  <link rel="stylesheet" type="text/css" href="/gen/colors.css">
  <link rel="stylesheet" type="text/css" href="/css/icons.css">
  <link rel="stylesheet" type="text/css" href="/css/common.css">
  <title>Authentification</title>

</head>
<script>

    function auth()
    {
        var login = $("#login").val()
        var pw = $("#password").val()
        var credit = "Basic  "+forge_sha256(login+":"+pw)
        $.ajax({
            type: 'GET',
            processData: false, // important
            contentType: false, // important
            url: "/login",
            headers : {
                "Authorization": credit
            },
            success: function(jsonData){
                window.location.href="/"
            },
            error : function(_a, _b, _c)
            {
                error("Erreur", _a.responseText)
            }
     });
    }
</script>

<style>
    .login-card {
        width: 50%;
    }
</style>
<body>
    <#include("../www/gen/header.html")>
    <main>
        <div class="container">
            <center>
                <div class="card darken-1 login-card" >
                    <div class="card-content">
                        <center><span class="card-title ">Authentification</span></center>
                    </div>
                    <div class="card-action row">
                        <div class="col s12">
                            <div  class="input-field ">
                                <input  id="login" type="text" class="validate">
                                <label for="login">Nom</label>
                            </div>
                        </div>
                        <div class="col s12">
                            <div  class="input-field ">
                                <input  id="password" type="password" class="validate">
                                <label for="password">Nom</label>
                            </div>
                        </div>
                        <a class="btn fond-color-1 color-4 col offset-s3  s6" onclick="auth()" ">Se connecter</a>
                    </div>
                </div>
            </center>
        </div>
    </main>

    <#include("../www/gen/footer.html")>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <script type="text/javascript" src="/js/init.js"></script>
    <script type="text/javascript" src="/js/sha256.js"></script>
</body>

</html>