

<style>
nav {
    padding-top:12px;
    padding-left:12px;
    height: 96px;
    box-shadow: unset;
    margin-bottom: 20px;
}
.menu-text {
    font-size: 24px ! important;
}

.navbar-item {
    padding-bottom: 12px;
    padding-top: 12px;
}

.menu {
    font-size: 36px;
    padding-left: 2px;
    padding-right: 2px;
}


.adress-bar > div > a {
    position: absolute;
    right: 5px;
    top: 0px;
}

.radio, .radio-group {
    font-size: 24px ! important;
    margin-right: 20px;
    margin-bottom: 20px;
    margin-top: 0px;

}


.radio-group > span {
    margin-right: 40px;
}

</style>

<script>

function radioValue(name, val=null) {
    if(val)
    {
        $("input[name='group_"+name+"']").each(function(a,b){
            $(b).prop("checked", $(b).data("value")==val)
        })
     }
    else return $("input[name='group_"+name+"']:checked").data("value")
}

function show_display_options(){
    modal('display')
    {{#user}}
        radioValue("display", data.user.display)
        radioValue("sort", data.user.sort)
        radioValue("order", data.user.order)
    {{/user}}
}

function confirm_display(){
    obj = {
        order: radioValue("order"),
        sort: radioValue("sort"),
        display: radioValue("display")
    }
    needRefresh=obj.display!=data.user.display
    if(!needRefresh)
        sort(obj.sort, obj.order)

    $.ajax({
        type: 'POST',
        processData: false, // important
        contentType: false, // important
        data: JSON.stringify(obj),
        headers: {
            "Content-Type": "application/json"
        },
        url: "/user/modify",
        success: function(jsonData){
            if(needRefresh) window.location.reload()
            else modalClose("display")
        },
        error: function(err){
            error("Erreur", err.responseText)
        },
    });
    modalClose("display")
}

</script>

<nav class="adress-bar fond-color-1 color-4">
    <div class="nav-wrapper custom-nav-wrapper">
        <ul id="nav-" class="valign-wrapper" >
            <div class="autoreplace" data-type="menupath" data-value="{{path}}"></div>
        </ul>
        <a onclick="show_display_options()" ><i class="color-4 material-icons menu-icon">build</i></a>
    </div>
</nav>


<div class="card darken-1 modal" id="display">
    <div class="card-content">
        <center><span class="card-title" >Options</span></center>
    </div>
    <div class="card-action row">
        <center>
            <p class="radio-group">
                <span>Affichage :</span>
                <label>
                    <input name="group_display" type="radio" data-value="tile" />
                    <span  class="radio">Tuile</span>
                </label>
                <label>
                    <input name="group_display" type="radio" data-value="list"/>
                    <span  class="radio">Liste</span>
                </label>
            </p>
            <p class="radio-group">
                <span>Tri :</span>
                <label>
                    <input name="group_sort" type="radio"  data-value="size" checked />
                    <span  class="radio">Taille</span>
                </label>
                <label>
                    <input name="group_sort" type="radio" data-value="date"/>
                    <span  class="radio">Date</span>
                </label>
                <label>
                    <input name="group_sort" type="radio" data-value="name"/>
                    <span  class="radio">Nom</span>
                </label>
            </p>
            <p class="radio-group">
                <span>Ordre :</span>
                <label>
                    <input name="group_order" type="radio"  data-value="inc" checked />
                    <span  class="radio">Croissant</span>
                </label>
                <label>
                    <input name="group_order" type="radio" data-value="dec"/>
                    <span  class="radio">DÃ©croissant</span>
                </label>
            </p>
        </center>

        <div class="row">
            <a class="btn fond-color-2 color-4 col offset-s3 s6" onclick="confirm_display()">OK</a>
        </div>
    </div>

</div>





